{% comment %}
Filter Sidebar Component
Usage: {% include 'learnmoreapp/components/filter-sidebar.html' with categories=categories levels=levels %}
Required context:
- categories: List of category objects with name and count
- levels: List of level objects with name and count
- price_range: Dictionary with min and max price
- durations: List of duration objects with name and count
{% endcomment %}

<aside class="filter-sidebar">
    <div class="filter-section">
        <div class="filter-title">
            <span>Categories</span>
            <i class="bi bi-chevron-down toggle-icon"></i>
        </div>
        <div class="filter-content">
            <div class="filter-group">
                {% for category in categories %}
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="category{{ forloop.counter }}" name="category" value="{{ category.name }}">
                    <label class="form-check-label" for="category{{ forloop.counter }}">
                        {{ category.name }}
                        <span class="category-count">({{ category.count }})</span>
                    </label>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    
    <div class="filter-section">
        <div class="filter-title">
            <span>Level</span>
            <i class="bi bi-chevron-down toggle-icon"></i>
        </div>
        <div class="filter-content">
            <div class="filter-group">
                {% for level in levels %}
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="level{{ forloop.counter }}" name="level" value="{{ level.name }}">
                    <label class="form-check-label" for="level{{ forloop.counter }}">
                        {{ level.name }}
                        <span class="category-count">({{ level.count }})</span>
                    </label>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    
    <div class="filter-section">
        <div class="filter-title">
            <span>Price Range</span>
            <i class="bi bi-chevron-down toggle-icon"></i>
        </div>
        <div class="filter-content">
            <div id="price-slider"></div>
            <div class="d-flex justify-content-between mt-2">
                <span>${{ price_range.min }}</span>
                <span>${{ price_range.max }}</span>
            </div>
        </div>
    </div>
    
    <div class="filter-section">
        <div class="filter-title">
            <span>Duration</span>
            <i class="bi bi-chevron-down toggle-icon"></i>
        </div>
        <div class="filter-content">
            <div class="filter-group">
                {% for duration in durations %}
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="duration{{ forloop.counter }}" name="duration" value="{{ duration.name }}">
                    <label class="form-check-label" for="duration{{ forloop.counter }}">
                        {{ duration.name }}
                        <span class="category-count">({{ duration.count }})</span>
                    </label>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</aside>

{% comment %}
Required CSS:
.filter-sidebar {
    position: fixed;
    top: 70px;
    left: 0;
    bottom: 0;
    width: var(--sidebar-width);
    background-color: white;
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
    z-index: 1020;
    transition: transform 0.3s ease;
    overflow-y: auto;
    padding: 1.5rem;
}

.filter-section {
    margin-bottom: 2rem;
}

.filter-title {
    font-weight: 700;
    margin-bottom: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.filter-title .toggle-icon {
    font-size: 1.25rem;
    cursor: pointer;
    color: var(--secondary);
}

.filter-content {
    margin-bottom: 1rem;
}

.filter-group {
    margin-bottom: 1rem;
}

.form-check-label {
    display: flex;
    justify-content: space-between;
    width: 100%;
}

.category-count {
    color: var(--secondary);
    font-size: 0.875rem;
}

@media (max-width: 991.98px) {
    .filter-sidebar {
        transform: translateX(-100%);
    }
    
    .filter-sidebar.show {
        transform: translateX(0);
    }
}
{% endcomment %}

{% comment %}
Required JavaScript:
// Toggle filter sections
document.querySelectorAll('.filter-title').forEach(title => {
    title.addEventListener('click', () => {
        const content = title.nextElementSibling;
        const icon = title.querySelector('.toggle-icon');
        
        if (content.style.display === 'none') {
            content.style.display = 'block';
            icon.classList.remove('bi-chevron-up');
            icon.classList.add('bi-chevron-down');
        } else {
            content.style.display = 'none';
            icon.classList.remove('bi-chevron-down');
            icon.classList.add('bi-chevron-up');
        }
    });
});

// Toggle sidebar on mobile
function toggleSidebar() {
    const sidebar = document.querySelector('.filter-sidebar');
    sidebar.classList.toggle('show');
}
{% endcomment %} 